<mat-drawer-container *ngIf="position$ | async as position"
                      fxLayout="row" fxLayoutAlign="start" class="explorer-container" fxFlexFill>

  <mat-drawer-content class="drawer-content" [fxFlex]="100">

    <div ngfireFileDragUpload (onFileDropped)="uploadFile($event)"
         class="drawer-content-inner" fxLayout="row wrap" fxLayoutAlign="start">

      <ngfire-file-manager-item *ngFor="let item of position.isFolder ? position.children : position.parent.children"
                                [item]="item"
                                (nodeClicked)="onNodeClicked($event)">
      </ngfire-file-manager-item>

    </div>
  </mat-drawer-content>


  <mat-drawer class="drawer-side" *ngIf="!position.isFolder"
              position="end" mode="over"
              [opened]="!position.isFolder"
              (closed)="onNodeClicked(position.parent)">
    <!-- Current File -->
    <ngfire-file-details-pane [file]="position"></ngfire-file-details-pane>
  </mat-drawer>

</mat-drawer-container>
